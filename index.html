<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>avus smart-cap Dashboard</title>

  <!-- Favicon-Fix: verhindert 404 auf /favicon.ico -->
  <link
    rel="icon"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='64' height='64' fill='%23003360'/%3E%3Ctext x='50%25' y='55%25' dominant-baseline='middle' text-anchor='middle' font-size='42' fill='white'%3EA%3C/text%3E%3C/svg%3E"
  />

  <!-- Babel-Warnung gezielt filtern (muss VOR babel.min.js stehen) -->
  <script>
    (function () {
      try {
        var _warn = console.warn;
        console.warn = function () {
          var s = arguments && String(arguments[0] || "");
          if (s.indexOf("in-browser Babel transformer") !== -1) return;
          return _warn.apply(console, arguments);
        };
      } catch (e) {}
    })();
  </script>

  <!-- ===== Stylesheet-Loader mit Fallback ===== -->
  <link rel="stylesheet" href="./style.css?v=2025-10-30-1" id="main-css" />
  <script>
    (function () {
      const link = document.getElementById("main-css");
      let tried = false;

      function inject(href) {
        const l = document.createElement("link");
        l.rel = "stylesheet";
        l.href = href + "?v=" + Date.now();
        l.onload = () => console.log("[css] loaded:", l.href);
        l.onerror = () => {
          document.head.removeChild(l);
          tryNext();
        };
        document.head.appendChild(l);
      }

      const repoPrefix = (function () {
        // Für GitHub Pages "Project Sites": /<repo>/
        const parts = location.pathname.split("/").filter(Boolean);
        return parts.length > 1 ? "/" + parts[0] + "/" : "/";
      })();

      const candidates = [
        "./style.css",
        "style.css",
        "./assets/style.css",
        repoPrefix + "style.css",
        repoPrefix + "assets/style.css",
      ];

      function tryNext() {
        if (!candidates.length) {
          console.warn("[css] no stylesheet found");
          return;
        }
        const href = candidates.shift();
        inject(href);
      }

      function probePrimary() {
        if (tried) return;
        tried = true;
        setTimeout(() => {
          const ok = Array.from(document.styleSheets || []).some((ss) =>
            (ss.href || "").includes("style.css")
          );
          if (!ok) tryNext();
        }, 600);
      }

      if (link) {
        link.addEventListener("error", tryNext, { once: true });
        probePrimary();
      } else {
        tryNext();
      }
    })();
  </script>
  <!-- ===== Ende Stylesheet-Loader ===== -->
</head>

<body>
  <noscript>Bitte JavaScript aktivieren.</noscript>
  <div id="app"></div>

  <!-- React & ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>

  <!-- PDF.js (für PDF-Parsing in Part 6) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js" crossorigin></script>
  <script>
    try {
      pdfjsLib.GlobalWorkerOptions.workerSrc =
        "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";
    } catch (e) {}
  </script>

  <!-- Babel (nur nötig, wenn app.js JSX enthält) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Deine App -->
  <script type="text/babel" src="./app.js"></script>

  <!-- Mount-Fallback (optional, falls nicht in app.js gerendert) -->
  <script type="text/babel">
    if (!document.getElementById("___appMounted")) {
      const rootEl = document.getElementById("app");
      if (rootEl && window.React && window.ReactDOM) {
        const root = ReactDOM.createRoot(rootEl);
        // root.render(<App />); // aktivieren, falls app.js kein eigenes Rendering enthält
      }
    }
  </script>
</body>
</html>
